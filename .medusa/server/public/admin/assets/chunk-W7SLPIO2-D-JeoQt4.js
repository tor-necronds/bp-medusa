import{c as Pt}from"./chunk-DK4WIVY6-CYCbBMOO.js";import{r as u,cL as Tt,cM as fe,bn as Gt,j as d,bb as Ze,g as Vt,_ as q,a0 as be,al as ze,ao as Wt,F as $t,c9 as it,bC as Kt,bF as Bt,bI as at,cN as Lt,cO as Ht,a4 as Ut,b as oe,cP as K,z as Yt,bz as ue,cQ as Zt,B as de,cR as Qt,cS as Jt,cT as Xt,cU as qt,cV as es,cW as ts,cX as ss,H as ns,cY as rs,bT as Qe,cZ as ls,a1 as os,a8 as is,K as as,a5 as cs}from"./index-DsV72Lgh.js";var us=Object.defineProperty,me=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,Je=(e,s,t)=>s in e?us(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,ds=(e,s)=>{for(var t in s||(s={}))ct.call(s,t)&&Je(e,t,s[t]);if(me)for(var t of me(s))ut.call(s,t)&&Je(e,t,s[t]);return e},hs=(e,s)=>{var t={};for(var n in e)ct.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&me)for(var n of me(e))s.indexOf(n)<0&&ut.call(e,n)&&(t[n]=e[n]);return t};const dt=u.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=hs(t,["color"]);return u.createElement("svg",ds({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),u.createElement("g",{clipPath:"url(#a)"},u.createElement("path",{fill:n,d:"M8.5 2.528h-.778a.75.75 0 1 0 0 1.5h1.08a4 4 0 0 1-.302-1.5M10.695 6.07a4 4 0 0 1-1.21-.94.75.75 0 0 0-.29.592V6.75H1.5a.75.75 0 0 0 0 1.5h7.694v1.028a.75.75 0 0 0 1.5 0zM5.806 1.5a.75.75 0 1 0-1.5 0v1.028H1.5a.75.75 0 0 0 0 1.5h2.806v1.028a.75.75 0 0 0 1.5 0V1.5M12.611 6.75a.75.75 0 0 0 0 1.5h.889a.75.75 0 0 0 0-1.5zM6.972 11.722a.75.75 0 0 1 .75-.75H13.5a.75.75 0 1 1 0 1.5H7.722a.75.75 0 0 1-.75-.75M1.5 10.972a.75.75 0 0 0 0 1.5h2.806V13.5a.75.75 0 0 0 1.5 0V9.944a.75.75 0 1 0-1.5 0v1.028z"}),u.createElement("circle",{cx:12.5,cy:2.5,r:2.5,fill:"#2563EB"}),u.createElement("circle",{cx:12.5,cy:2.5,r:2.25,stroke:n,strokeOpacity:.24,strokeWidth:.5})),u.createElement("defs",null,u.createElement("clipPath",{id:"a"},u.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});dt.displayName="AdjustmentsDone";var fs=Object.defineProperty,pe=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,Xe=(e,s,t)=>s in e?fs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,ms=(e,s)=>{for(var t in s||(s={}))ht.call(s,t)&&Xe(e,t,s[t]);if(pe)for(var t of pe(s))ft.call(s,t)&&Xe(e,t,s[t]);return e},ps=(e,s)=>{var t={};for(var n in e)ht.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&pe)for(var n of pe(e))s.indexOf(n)<0&&ft.call(e,n)&&(t[n]=e[n]);return t};const mt=u.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=ps(t,["color"]);return u.createElement("svg",ms({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),u.createElement("path",{fill:n,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.823-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.924 4.678a.11.11 0 0 0-.056.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.41c.414 0 .78.344.78.759 0 .414-.366.741-.78.741H2.117a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75M9.338 8.72a.75.75 0 0 1 1.06 0l1.623 1.622 1.622-1.622a.75.75 0 1 1 1.06 1.06l-1.621 1.623 1.622 1.622a.75.75 0 0 1-1.06 1.061l-1.623-1.623-1.623 1.623a.75.75 0 0 1-1.06-1.06l1.622-1.623L9.338 9.78a.75.75 0 0 1 0-1.06",clipRule:"evenodd"}),u.createElement("path",{fill:n,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});mt.displayName="TaxExclusive";var gs=Object.defineProperty,ge=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,qe=(e,s,t)=>s in e?gs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,bs=(e,s)=>{for(var t in s||(s={}))pt.call(s,t)&&qe(e,t,s[t]);if(ge)for(var t of ge(s))gt.call(s,t)&&qe(e,t,s[t]);return e},vs=(e,s)=>{var t={};for(var n in e)pt.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&ge)for(var n of ge(e))s.indexOf(n)<0&&gt.call(e,n)&&(t[n]=e[n]);return t};const bt=u.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=vs(t,["color"]);return u.createElement("svg",bs({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),u.createElement("path",{fill:n,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.824-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.925 4.678a.11.11 0 0 0-.057.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.346c.414 0 .812.337.812.75 0 .415-.398.75-.812.75H2.118a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75m6.028 0a.75.75 0 0 1 .75.75v1.292a.75.75 0 0 1-1.5 0V8.146a.75.75 0 0 1 .75-.75m5.588.733a.75.75 0 0 1 .2 1.042l-3.215 4.736a.75.75 0 0 1-1.16.1l-1.522-1.579a.75.75 0 0 1 1.08-1.041l.88.913 2.695-3.971a.75.75 0 0 1 1.042-.2",clipRule:"evenodd"}),u.createElement("path",{fill:n,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});bt.displayName="TaxInclusive";var ws=function(e){var s=e.as,t=e.errors,n=e.name,r=e.message,l=e.render,i=function(m,v){if(m==null)return{};var b,p,x={},y=Object.keys(m);for(p=0;p<y.length;p++)v.indexOf(b=y[p])>=0||(x[b]=m[b]);return x}(e,["as","errors","name","message","render"]),o=Tt(),a=fe(t||o.formState.errors,n);if(!a)return null;var h=a.message,c=a.types,f=Object.assign({},i,{children:h||r});return u.isValidElement(s)?u.cloneElement(s,f):l?l({message:h||r,messages:c}):u.createElement(s||u.Fragment,f)};function re(e,s,t){let n=t.initialDeps??[],r;function l(){var i,o,a,h;let c;t.key&&((i=t.debug)!=null&&i.call(t))&&(c=Date.now());const f=e();if(!(f.length!==n.length||f.some((b,p)=>n[p]!==b)))return r;n=f;let v;if(t.key&&((o=t.debug)!=null&&o.call(t))&&(v=Date.now()),r=s(...f),t.key&&((a=t.debug)!=null&&a.call(t))){const b=Math.round((Date.now()-c)*100)/100,p=Math.round((Date.now()-v)*100)/100,x=p/16,y=(k,w)=>{for(k=String(k);k.length<w;)k=" "+k;return k};console.info(`%c⏱ ${y(p,5)} /${y(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(h=t==null?void 0:t.onChange)==null||h.call(t,r),r}return l.updateDeps=i=>{n=i},l}function et(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const xs=(e,s)=>Math.abs(e-s)<1.01,Cs=(e,s,t)=>{let n;return function(...r){e.clearTimeout(n),n=e.setTimeout(()=>s.apply(this,r),t)}},tt=e=>{const{offsetWidth:s,offsetHeight:t}=e;return{width:s,height:t}},ys=e=>e,ks=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let r=s;r<=t;r++)n.push(r);return n},js=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const r=i=>{const{width:o,height:a}=i;s({width:Math.round(o),height:Math.round(a)})};if(r(tt(t)),!n.ResizeObserver)return()=>{};const l=new n.ResizeObserver(i=>{const o=()=>{const a=i[0];if(a!=null&&a.borderBoxSize){const h=a.borderBoxSize[0];if(h){r({width:h.inlineSize,height:h.blockSize});return}}r(tt(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},st={passive:!0},nt=typeof window>"u"?!0:"onscrollend"in window,Ss=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let r=0;const l=e.options.useScrollendEvent&&nt?()=>{}:Cs(n,()=>{s(r,!1)},e.options.isScrollingResetDelay),i=c=>()=>{const{horizontal:f,isRtl:m}=e.options;r=f?t.scrollLeft*(m&&-1||1):t.scrollTop,l(),s(r,c)},o=i(!0),a=i(!1);a(),t.addEventListener("scroll",o,st);const h=e.options.useScrollendEvent&&nt;return h&&t.addEventListener("scrollend",a,st),()=>{t.removeEventListener("scroll",o),h&&t.removeEventListener("scrollend",a)}},Es=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const n=s.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},_s=(e,{adjustments:s=0,behavior:t},n)=>{var r,l;const i=e+s;(l=(r=n.scrollElement)==null?void 0:r.scrollTo)==null||l.call(r,{[n.options.horizontal?"left":"top"]:i,behavior:t})};class Ms{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(l=>{const i=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var r;(r=n())==null||r.disconnect(),t=null},observe:r=>{var l;return(l=n())==null?void 0:l.observe(r,{box:"border-box"})},unobserve:r=>{var l;return(l=n())==null?void 0:l.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,r])=>{typeof r>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ys,rangeExtractor:ks,onChange:()=>{},measureElement:Es,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,r;(r=(n=this.options).onChange)==null||r.call(n,this,t)},this.maybeNotify=re(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const r=new Map,l=new Map;for(let i=n-1;i>=0;i--){const o=t[i];if(r.has(o.lane))continue;const a=l.get(o.lane);if(a==null||o.end>a.end?l.set(o.lane,o):o.end<a.end&&r.set(o.lane,!0),r.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((i,o)=>i.end===o.end?i.index-o.index:i.end-o.end)[0]:void 0},this.getMeasurementOptions=re(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,r,l,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:r,getItemKey:l,enabled:i}),{key:!1}),this.getMeasurements=re(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:r,getItemKey:l,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,a);for(let c=a;c<t;c++){const f=l(c),m=this.options.lanes===1?h[c-1]:this.getFurthestMeasurement(h,c),v=m?m.end+this.options.gap:n+r,b=o.get(f),p=typeof b=="number"?b:this.options.estimateSize(c),x=v+p,y=m?m.lane:c%this.options.lanes;h[c]={index:c,start:v,size:p,end:x,key:f,lane:y}}return this.measurementsCache=h,h},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=re(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,r,l)=>this.range=t.length>0&&n>0?Ds({measurements:t,outerSize:n,scrollOffset:r,lanes:l}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=re(()=>{let t=null,n=null;const r=this.calculateRange();return r&&(t=r.startIndex,n=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,r,l,i)=>l===null||i===null?[]:t({startIndex:l,endIndex:i,overscan:n,count:r}),{key:"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,r=t.getAttribute(n);return r?parseInt(r,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const r=this.indexFromElement(t),l=this.measurementsCache[r];if(!l)return;const i=l.key,o=this.elementsCache.get(i);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(r,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const r=this.measurementsCache[t];if(!r)return;const l=this.itemSizeCache.get(r.key)??r.size,i=n-l;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,i,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,r)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(r))});return}this._measureElement(t,void 0)},this.getVirtualItems=re(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const r=[];for(let l=0,i=t.length;l<i;l++){const o=t[l],a=n[o];r.push(a)}return r},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return et(n[vt(0,n.length-1,r=>et(n[r]).start,t)])},this.getOffsetForAlignment=(t,n,r=0)=>{const l=this.getSize(),i=this.getScrollOffset();n==="auto"&&(n=t>=i+l?"end":"start"),n==="center"?t+=(r-l)/2:n==="end"&&(t-=l);const o=this.getTotalSize()+this.options.scrollMargin-l;return Math.max(Math.min(o,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=this.measurementsCache[t];if(!r)return;const l=this.getSize(),i=this.getScrollOffset();if(n==="auto")if(r.end>=i+l-this.options.scrollPaddingEnd)n="end";else if(r.start<=i+this.options.scrollPaddingStart)n="start";else return[i,n];const o=n==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n,r.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:n="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:n="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let l=0;const i=10,o=h=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(t,h);if(!c){console.warn("Failed to get offset for index:",t);return}const[f,m]=c;this._scrollToOffset(f,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const v=this.getScrollOffset(),b=this.getOffsetForIndex(t,m);if(!b){console.warn("Failed to get offset for index:",t);return}xs(b[0],v)||a(m)})},a=h=>{this.targetWindow&&(l++,l<i?(this.options.debug&&console.info("Schedule retry",l,i),this.targetWindow.requestAnimationFrame(()=>o(h))):console.warn(`Failed to scroll to index ${t} after ${i} attempts.`))};o(n)},this.scrollBy=(t,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let r;if(n.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((t=n[n.length-1])==null?void 0:t.end)??0;else{const l=Array(this.options.lanes).fill(null);let i=n.length-1;for(;i>=0&&l.some(o=>o===null);){const o=n[i];l[o.lane]===null&&(l[o.lane]=o.end),i--}r=Math.max(...l.filter(o=>o!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const vt=(e,s,t,n)=>{for(;e<=s;){const r=(e+s)/2|0,l=t(r);if(l<n)e=r+1;else if(l>n)s=r-1;else return r}return e>0?e-1:0};function Ds({measurements:e,outerSize:s,scrollOffset:t,lanes:n}){const r=e.length-1,l=a=>e[a].start;if(e.length<=n)return{startIndex:0,endIndex:r};let i=vt(0,r,l,t),o=i;if(n===1)for(;o<r&&e[o].end<t+s;)o++;else if(n>1){const a=Array(n).fill(0);for(;o<r&&a.some(c=>c<t+s);){const c=e[o];a[c.lane]=c.end,o++}const h=Array(n).fill(t+s);for(;i>=0&&h.some(c=>c>=t);){const c=e[i];h[c.lane]=c.start,i--}i=Math.max(0,i-i%n),o=Math.min(r,o+(n-1-o%n))}return{startIndex:i,endIndex:o}}const rt=typeof document<"u"?u.useLayoutEffect:u.useEffect;function Is(e){const s=u.useReducer(()=>({}),{})[1],t={...e,onChange:(r,l)=>{var i;l?Gt.flushSync(s):s(),(i=e.onChange)==null||i.call(e,r,l)}},[n]=u.useState(()=>new Ms(t));return n.setOptions(t),rt(()=>n._didMount(),[]),rt(()=>n._willUpdate()),n}function lt(e){return Is({observeElementRect:js,observeElementOffset:Ss,scrollToFn:_s,...e})}var Os=({columns:e,rows:s=10})=>{const t=Array.from({length:s},(r,l)=>l),n=e.length;return d.jsxs("div",{className:"bg-ui-bg-subtle size-full",children:[d.jsx("div",{className:"bg-ui-bg-base border-b p-4",children:d.jsx("div",{className:"bg-ui-button-neutral h-7 w-[116px] animate-pulse rounded-md"})}),d.jsxs("div",{className:"bg-ui-bg-subtle size-full overflow-auto",children:[d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${n}, 1fr)`},children:e.map((r,l)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(Ze,{className:"h-[14px] w-[164px]"})},l))}),d.jsx("div",{children:t.map((r,l)=>d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${n}, 1fr)`},children:e.map((i,o)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(Ze,{className:"h-[14px] w-[164px]"})},o))},l))})]})]})};function zs(e,s){typeof e=="function"?e(s):e&&"current"in e&&(e.current=s)}var ve=(...e)=>s=>{e.forEach(t=>zs(t,s))},wt=u.createContext(null),Ne=()=>{const e=u.useContext(wt);if(!e)throw new Error("useDataGridContext must be used within a DataGridContextProvider");return e};function xt(e){return`${e.row}:${e.col}`}function Ct(e,s){return s?e.row===s.row&&e.col===s.col:!1}var Ns=[".",","];function yt(e){return Ns.includes(e.key)&&e.ctrlKey&&e.altKey}var As=/^.$/u,Fs=/^[0-9]$/u,we=({context:e})=>{const{register:s,control:t,anchor:n,setIsEditing:r,setSingleRange:l,setIsSelecting:i,setRangeEnd:o,getWrapperFocusHandler:a,getWrapperMouseOverHandler:h,getInputChangeHandler:c,getIsCellSelected:f,getIsCellDragSelected:m,getCellMetadata:v}=Ne(),{rowIndex:b,columnIndex:p}=e,x=u.useMemo(()=>({row:b,col:p}),[b,p]),{id:y,field:k,type:w,innerAttributes:I,inputAttributes:j}=u.useMemo(()=>v(x),[x,v]),[O,G]=u.useState(!0),T=u.useRef(null),R=u.useRef(null),U=u.useCallback(S=>{if(S.preventDefault(),S.stopPropagation(),S.detail===2&&R.current){G(!1),R.current.focus();return}if(S.shiftKey&&x.col===(n==null?void 0:n.col)){o(x);return}T.current&&(l(x),i(!0),T.current.focus())},[x,n,o,l,i]),Y=u.useCallback(S=>{var P;if(S.preventDefault(),S.stopPropagation(),S.detail===2){(P=R.current)==null||P.focus();return}if(S.shiftKey){o(x);return}T.current&&(l(x),i(!0),T.current.focus())},[i,l,o,x]),ee=u.useCallback(()=>{G(!0),r(!1)},[r]),te=u.useCallback(()=>{G(!1),r(!0)},[r]),se=u.useCallback(S=>{switch(w){case"togglable-number":case"number":return Fs.test(S);case"text":return As.test(S);default:return!1}},[w]),Z=u.useCallback(S=>{var P;if(!(!R.current||!se(S.key)||!O)&&!(S.key.toLowerCase()==="z"&&(S.ctrlKey||S.metaKey))&&!(S.key.toLowerCase()==="c"&&(S.ctrlKey||S.metaKey))&&!(S.key.toLowerCase()==="v"&&(S.ctrlKey||S.metaKey))&&S.key!=="Enter"&&!yt(S.nativeEvent)){if(R.current.focus(),G(!1),R.current instanceof HTMLInputElement){R.current.value="";const Q=(P=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:P.set;Q==null||Q.call(R.current,S.key);const J=new Event("input",{bubbles:!0});R.current.dispatchEvent(J)}S.stopPropagation(),S.preventDefault()}},[O,se]),L=u.useMemo(()=>n?Ct(x,n):!1,[n,x]),B=u.useMemo(()=>w==="boolean",[w]);u.useEffect(()=>{var S,P;L&&!((S=T.current)!=null&&S.contains(document.activeElement))&&((P=T.current)==null||P.focus())},[L]);const ne={container:{field:k,isAnchor:L,isSelected:f(x),isDragSelected:m(x),showOverlay:B?!1:O,innerProps:{ref:T,onMouseOver:h(x),onMouseDown:w==="boolean"?Y:void 0,onKeyDown:Z,onFocus:a(x),...I},overlayProps:{onMouseDown:U}},input:{ref:R,onBlur:ee,onFocus:te,onChange:c(k),...j}};return{id:y,field:k,register:s,control:t,renderProps:ne}},ie=({context:e})=>{const{errors:s,getCellErrorMetadata:t,navigateToField:n}=Ne(),{rowIndex:r,columnIndex:l}=e,{accessor:i,field:o}=u.useMemo(()=>t({row:r,col:l}),[r,l,t]),a=i&&l===0?fe(s,i):void 0,h=[];function c(m,v){if(m)if(Rs(m)){const b=m.message,p=()=>n(v);b&&h.push({message:b,to:p})}else Object.keys(m).forEach(b=>{const p=m[b],x=`${v}.${b}`;p&&typeof p=="object"&&c(p,x)})}a&&i&&c(a,i);const f=o?fe(s,o):void 0;return{errors:s,rowErrors:h,cellError:f}};function Rs(e){return typeof e=="object"&&"message"in e&&"type"in e}var le=class{constructor({fields:e,prev:s,next:t,setter:n}){K(this,"_fields"),K(this,"_prev"),K(this,"_next"),K(this,"_setter"),this._fields=e,this._prev=s,this._next=t,this._setter=n}execute(e=!1){this._setter(this._fields,this._next,e)}undo(){this._setter(this._fields,this._prev,!0)}redo(){this.execute(!0)}},Ps=class{constructor(e,s,t=!1){K(this,"multiColumnSelection"),K(this,"cells"),K(this,"rowAccessors",[]),K(this,"columnAccessors",[]),this.multiColumnSelection=t,this.cells=this._populateCells(e,s),this.rowAccessors=this._computeRowAccessors(),this.columnAccessors=this._computeColumnAccessors()}_computeRowAccessors(){return this.cells.map((e,s)=>this.getRowAccessor(s))}_computeColumnAccessors(){return this.cells.length===0?[]:this.cells[0].map((e,s)=>this.getColumnAccessor(s))}getFirstNavigableCell(){for(let e=0;e<this.cells.length;e++)for(let s=0;s<this.cells[0].length;s++)if(this.cells[e][s]!==null)return{row:e,col:s};return null}getFieldsInRow(e){const s=[];return e<0||e>=this.cells.length||this.cells[e].forEach(t=>{t!==null&&s.push(t.field)}),s}getFieldsInSelection(e,s){var o;const t=[];if(!e||!s)return t;if(!this.multiColumnSelection&&e.col!==s.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const n=Math.min(e.row,s.row),r=Math.max(e.row,s.row),l=this.multiColumnSelection?Math.min(e.col,s.col):e.col,i=this.multiColumnSelection?Math.max(e.col,s.col):e.col;for(let a=n;a<=r;a++)for(let h=l;h<=i;h++)this._isValidPosition(a,h)&&this.cells[a][h]!==null&&t.push((o=this.cells[a][h])==null?void 0:o.field);return t}getCellField(e){var s;return this._isValidPosition(e.row,e.col)&&((s=this.cells[e.row][e.col])==null?void 0:s.field)||null}getCellType(e){var s;return this._isValidPosition(e.row,e.col)&&((s=this.cells[e.row][e.col])==null?void 0:s.type)||null}getIsCellSelected(e,s,t){if(!e||!s||!t)return!1;if(!this.multiColumnSelection&&s.col!==t.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const n=Math.min(s.row,t.row),r=Math.max(s.row,t.row),l=this.multiColumnSelection?Math.min(s.col,t.col):s.col,i=this.multiColumnSelection?Math.max(s.col,t.col):s.col;return e.row>=n&&e.row<=r&&e.col>=l&&e.col<=i}toggleColumn(e,s){e<0||e>=this.cells[0].length||this.cells.forEach((t,n)=>{const r=t[e];r&&(this.cells[n][e]={...r,enabled:s})})}toggleRow(e,s){e<0||e>=this.cells.length||this.cells[e].forEach((t,n)=>{t&&(this.cells[e][n]={...t,enabled:s})})}getCoordinatesByField(e){if(this.rowAccessors.length===1){const s=this.columnAccessors.indexOf(e);return s===-1?null:{row:0,col:s}}for(let s=0;s<this.rowAccessors.length;s++){const t=this.rowAccessors[s];if(t!==null&&e.startsWith(t))for(let n=0;n<this.columnAccessors.length;n++){const r=this.columnAccessors[n];if(r===null)continue;if(`${t}.${r}`===e)return{row:s,col:n}}}return null}getRowAccessor(e){if(e<0||e>=this.cells.length)return null;const t=this.cells[e].filter(l=>l!==null).map(l=>l.field.split("."));if(t.length===0)return null;let n=t[0];for(const l of t)if(n=n.filter((i,o)=>l[o]===i),n.length===0)break;const r=n.join(".");return r||null}getColumnAccessor(e){if(e<0||e>=this.cells[0].length)return null;const s=this.cells.map((r,l)=>{const i=r[e];if(!i)return null;const o=this.getRowAccessor(l);return o&&i.field.startsWith(o+".")?i.field.slice(o.length+1):null}).filter(r=>r!==null);if(s.length===0)return null;const t=s[0];return s.every(r=>r===t)?t:null}getValidMovement(e,s,t,n=!1){var i;const[r,l]=this._getDirectionDeltas(t);if(n)return this._getLastValidCellInDirection(e,s,r,l);{let o=e+r,a=s+l;for(;this._isValidPosition(o,a);){if(this.cells[o][a]!==null&&((i=this.cells[o][a])==null?void 0:i.enabled)!==!1)return{row:o,col:a};o+=r,a+=l}return{row:e,col:s}}}_isValidPosition(e,s,t){return t||(t=this.cells),e>=0&&e<t.length&&s>=0&&s<t[0].length}_getDirectionDeltas(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];case"ArrowRight":return[0,1];default:return[0,0]}}_getLastValidCellInDirection(e,s,t,n){let r=e,l=s,i=e,o=s;for(;this._isValidPosition(r+t,l+n);)r+=t,l+=n,this.cells[r][l]!==null&&(i=r,o=l);return{row:i,col:o}}_populateCells(e,s){const t=Array.from({length:e.length},()=>Array(s.length).fill(null));return e.forEach((n,r)=>{s.forEach((l,i)=>{if(!this._isValidPosition(r,i,t))return;const{name:o,field:a,type:h,...c}=l.meta,f={row:n,column:{...l,meta:c}},m=a?a(f):null;!m||!h||(t[r][i]={field:m,type:h,enabled:!0})})}),t}},Ts=class{constructor(e){K(this,"container"),this.container=e}getInput(e){var n;const s=this._getCellId(e),t=(n=this.container)==null?void 0:n.querySelector(`[data-cell-id="${s}"]`);return t||null}getInputByField(e){var t;const s=(t=this.container)==null?void 0:t.querySelector(`[data-field="${e}"]`);return s||null}getCoordinatesByField(e){var l;const s=(l=this.container)==null?void 0:l.querySelector(`[data-field="${e}"][data-cell-id]`);if(!s)return null;const t=s.getAttribute("data-cell-id");if(!t)return null;const[n,r]=t.split(":").map(i=>parseInt(i,10));return isNaN(n)||isNaN(r)?null:{row:n,col:r}}getContainer(e){var n;const s=this._getCellId(e),t=(n=this.container)==null?void 0:n.querySelector(`[data-container-id="${s}"]`);return t||null}_getCellId(e){return xt(e)}},he=class{constructor({prev:e,next:s,setter:t}){K(this,"_prev"),K(this,"_next"),K(this,"_setter"),this._prev=e,this._next=s,this._setter=t}execute(){this._setter(this._next)}undo(){this._setter(this._prev)}redo(){this.execute()}},Gs=({matrix:e,anchor:s,rangeEnd:t,setRangeEnd:n,isDragging:r,setIsDragging:l,isSelecting:i,setIsSelecting:o,setSingleRange:a,dragEnd:h,setDragEnd:c,setValue:f,execute:m,multiColumnSelection:v})=>{const b=u.useCallback(j=>O=>{a(j)},[a]),p=u.useCallback(j=>O=>{if(O.stopPropagation(),O.preventDefault(),O.shiftKey){n(j);return}o(!0),a(j)},[o,n,a]),x=u.useCallback(j=>{if(!(!r&&!i))return O=>{(s==null?void 0:s.col)!==j.col&&!v||(i?n(j):c(j))}},[s==null?void 0:s.col,r,i,c,n,v]),y=u.useCallback(j=>(O,G)=>{const T=new he({next:O,prev:G,setter:R=>{f(j,R,{shouldDirty:!0,shouldTouch:!0})}});m(T)},[f,m]),k=u.useCallback(j=>{l(!0)},[l]),w=u.useCallback(j=>!j||!s||!t?!1:e.getIsCellSelected(j,s,t),[s,t,e]),I=u.useCallback(j=>!j||!s||!h?!1:e.getIsCellSelected(j,s,h),[s,h,e]);return{getWrapperFocusHandler:b,getOverlayMouseDownHandler:p,getWrapperMouseOverHandler:x,getInputChangeHandler:y,getIsCellSelected:w,getIsCellDragSelected:I,onDragToFillStart:k}},Vs=({matrix:e})=>{const s=u.useCallback(n=>{const{row:r,col:l}=n,i=xt(n),o=e.getCellField(n),a=e.getCellType(n);if(!o||!a)throw new Error(`'field' or 'type' is null for cell ${i}`);return{id:i,field:o,type:a,inputAttributes:{"data-row":r,"data-col":l,"data-cell-id":i,"data-field":o},innerAttributes:{"data-container-id":i}}},[e]),t=u.useCallback(n=>{const r=e.getRowAccessor(n.row),l=e.getCellField(n);return{accessor:r,field:l}},[e]);return{getCellMetadata:s,getCellErrorMetadata:t}},Ws=({matrix:e,form:s})=>{const[t,n]=u.useState(null),{getValues:r,setValue:l}=s,i=u.useCallback(a=>{if(!a)return null;const h=e.getCellField(a);if(!h)return null;const c=r(h);n(f=>(f==null?void 0:f.field)===h?f:{field:h,value:c})},[r,e]),o=u.useCallback(()=>{if(!t)return;const{field:a,value:h}=t;requestAnimationFrame(()=>{l(a,h)})},[l,t]);return{createSnapshot:i,restoreSnapshot:o}},$s=({matrix:e,anchor:s,rangeEnd:t,isEditing:n,getSelectionValues:r,setSelectionValues:l,execute:i})=>{const o=u.useCallback(h=>{var v;if(n||!s||!t)return;h.preventDefault();const c=e.getFieldsInSelection(s,t),m=r(c).map(b=>typeof b=="object"&&b!==null?JSON.stringify(b):`${b}`??"").join("	");(v=h.clipboardData)==null||v.setData("text/plain",m)},[n,s,t,e,r]),a=u.useCallback(h=>{var p;if(n||!s||!t)return;h.preventDefault();const c=(p=h.clipboardData)==null?void 0:p.getData("text/plain");if(!c)return;const f=c.split("	"),m=e.getFieldsInSelection(s,t),v=r(m),b=new le({fields:m,next:f,prev:v,setter:l});i(b)},[n,s,t,e,r,l,i]);return{handleCopyEvent:o,handlePasteEvent:a}};function Ks(e,s){const t=e.getAllLeafColumns(),n=t.map(a=>({id:a.id,name:Bs(a),checked:a.getIsVisible(),disabled:!a.getCanHide()})),r=u.useCallback(a=>h=>{const c=t[a];c.getCanHide()&&(s.toggleColumn(a,h),c.toggleVisibility(h))},[t,s]),l=u.useCallback(()=>{e.setColumnVisibility({})},[e]),o=n.filter(a=>!a.disabled).length===0;return{columnOptions:n,handleToggleColumn:r,handleResetColumns:l,isDisabled:o}}function Bs(e){const s=e.columnDef.id,t=e.columnDef.enableHiding,n=e==null?void 0:e.columnDef.meta;if(!s)throw new Error("Column is missing an id, which is a required field. Please provide an id for the column.");return!(n!=null&&n.name)&&t&&console.warn(`Column "${s}" does not have a name. You should add a name to the column definition. Falling back to the column id.`),(n==null?void 0:n.name)||s}var Dn=({duplicateOf:e})=>{const{control:s}=Ne();return{watchedValue:$t({control:s,name:e})}},Ls=(e,s,t)=>{const[n,r]=u.useState(!1),[l,i]=u.useState(null),{flatRows:o}=s.getRowModel(),a=s.getAllFlatColumns(),h=kt(t),c=h.length,{rowsWithErrors:f,columnsWithErrors:m}=u.useMemo(()=>{const b=new Set,p=new Set;return h.forEach(x=>{const y=e.rowAccessors.findIndex(w=>w&&(x===w||x.startsWith(`${w}.`)));y!==-1&&b.add(y);const k=e.columnAccessors.findIndex(w=>w&&(x===w||x.endsWith(`.${w}`)));k!==-1&&p.add(k)}),{rowsWithErrors:b,columnsWithErrors:p}},[h,e.rowAccessors,e.columnAccessors]),v=u.useCallback((b,p,x,y)=>{if(n)l&&(x(l.rows),y(l.columns));else{i({rows:{...b},columns:{...p}});const k=o.map((I,j)=>f.has(j)?void 0:j).filter(I=>I!==void 0),w=a.map((I,j)=>!m.has(j)&&j!==0?I.id:void 0).filter(I=>I!==void 0);x(k.reduce((I,j)=>({...I,[j]:!1}),{})),y(w.reduce((I,j)=>({...I,[j]:!1}),{}))}r(k=>!k)},[n,l,o,a,f,m]);return{errorCount:c,isHighlighted:n,toggleErrorHighlighting:v}};function kt(e,s=[]){return typeof e!="object"||e===null?[]:"message"in e&&"type"in e?[s.join(".")]:Object.entries(e).flatMap(([t,n])=>kt(n,[...s,t]))}var Hs=({matrix:e,form:s,anchor:t})=>{const{getValues:n,reset:r}=s,l=u.useCallback(o=>{if(!o.length)return[];const a=n();return o.map(h=>h.split(".").reduce((c,f)=>c==null?void 0:c[f],a))},[n]),i=u.useCallback(async(o,a,h)=>{if(!o.length||!t)return;const c=e.getCellType(t);if(!c)return;const f=qs(a,c),m=n();o.forEach((v,b)=>{if(!v)return;const p=b%a.length,x=f[p];Js(m,v,x,c,h)}),r(m,{keepDirty:!0,keepTouched:!0,keepDefaultValues:!0})},[e,t,n,r]);return{getSelectionValues:l,setSelectionValues:i}};function Us(e){if(typeof e=="number")return e;const s=Number(e);if(isNaN(s))throw new Error(`String "${e}" cannot be converted to number.`);return s}function Ys(e){if(typeof e=="boolean")return e;if(typeof e>"u"||e===null)return!1;const s=e.toLowerCase();if(s==="true"||s==="false")return s==="true";throw new Error(`String "${e}" cannot be converted to boolean.`)}function Zs(e){return typeof e>"u"||e===null?"":String(e)}function Qs(e){let s=e;if(typeof s=="string")try{s=JSON.parse(s)}catch{throw new Error(`String "${e}" cannot be converted to object.`)}return s}function Js(e,s,t,n,r){if(n!=="togglable-number"){s.split(".").reduce((l,i,o)=>(o===s.split(".").length-1&&(l[i]=t),l[i]??(l[i]={}),l[i]),e);return}Xs(e,s,t,r)}function Xs(e,s,t,n){const r=s.split(".").reduce((f,m)=>f==null?void 0:f[m],e),{disabledToggle:l}=r,i=f=>l&&f===""?0:f,o=f=>l?!0:f!==""&&f!=null,a=i(t.quantity),h=n?l?!0:t.checked:o(a),c=s.split(".");c.reduce((f,m,v)=>(v===c.length-1&&(f[m]={...e,quantity:a,checked:h}),f[m]??(f[m]={}),f[m]),e)}function qs(e,s){switch(s){case"number":return e.map(t=>t===""?t:t==null?"":Us(t));case"togglable-number":return e.map(Qs);case"boolean":return e.map(Ys);case"text":return e.map(Zs);default:throw new Error(`Unsupported target type "${s}".`)}}var en=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tn=["ArrowUp","ArrowDown"],sn=({containerRef:e,matrix:s,anchor:t,rangeEnd:n,isEditing:r,setTrapActive:l,scrollToCoordinates:i,setSingleRange:o,setRangeEnd:a,onEditingChangeHandler:h,getValues:c,setValue:f,execute:m,undo:v,redo:b,queryTool:p,getSelectionValues:x,setSelectionValues:y,restoreSnapshot:k,createSnapshot:w})=>{const I=u.useCallback(g=>{if(!t)return;const C=s.getCellType(t);if(r&&C!=="boolean")return;const M=tn.includes(g.key)?"vertical":"horizontal",E=M==="horizontal"?t:g.shiftKey?n:t,D=M==="horizontal"?o:g.shiftKey?a:o;if(!E)return;const{row:z,col:F}=E,N=V=>{g.preventDefault(),g.stopPropagation(),i(V,M),D(V)},X=s.getValidMovement(z,F,g.key,g.metaKey||g.ctrlKey);N(X)},[r,t,n,i,o,a,s]),j=u.useCallback(g=>{if(!t)return;g.preventDefault(),g.stopPropagation();const{row:C,col:M}=t,E=g.shiftKey?"ArrowLeft":"ArrowRight",D="horizontal",z=s.getValidMovement(C,M,E,g.metaKey||g.ctrlKey);i(z,D),o(z)},[t,i,o,s]),O=u.useCallback(g=>{if(g.preventDefault(),g.shiftKey){b();return}v()},[b,v]),G=u.useCallback(g=>{const C=n??g,M=s.getFieldsInSelection(g,C),E=x(M),D=E.every(N=>N===!0),z=Array.from({length:E.length},()=>!D),F=new le({fields:M,next:z,prev:E,setter:y});m(F)},[n,s,x,y,m]),T=u.useCallback(g=>{const C=s.getCellField(g),M=p==null?void 0:p.getInput(g);if(!C||!M)return;w(g);const E=c(C),D="",z=new he({next:D,prev:E,setter:F=>{f(C,F,{shouldDirty:!0,shouldTouch:!0})}});m(z),M.focus()},[s,p,c,m,f,w]),R=u.useCallback(g=>{const C=s.getCellField(g),M=p==null?void 0:p.getInput(g);if(!C||!M)return;w(g);const E=c(C);let D=E.checked;E.disabledToggle||(D=!1);const z={...E,quantity:"",checked:D},F=new he({next:z,prev:E,setter:N=>{f(C,N,{shouldDirty:!0,shouldTouch:!0})}});m(F),M.focus()},[s,p,c,m,f,w]),U=u.useCallback(g=>{if(!t||r)return;g.preventDefault();const C=s.getCellType(t);if(C)switch(C){case"boolean":G(t);break;case"togglable-number":R(t);break;case"number":case"text":T(t);break}},[t,r,s,G,T,R]),Y=u.useCallback((g,C)=>{const M=g.shiftKey?"ArrowUp":"ArrowDown",E=s.getValidMovement(C.row,C.col,M,!1);if(C.row!==E.row||C.col!==E.col)o(E),i(E,"vertical");else{const D=p==null?void 0:p.getContainer(C);D==null||D.focus()}h(!1)},[p,s,i,o,h]),ee=u.useCallback(g=>{const C=p==null?void 0:p.getInput(g);C&&(C.focus(),h(!0))},[p,h]),te=u.useCallback((g,C)=>{if(r){Y(g,C);return}ee(C)},[Y,ee,r]),se=u.useCallback((g,C)=>{const M=s.getCellField(C);if(!M)return;const E=c(M);let D;typeof E=="boolean"?D=!E:D=!0;const z=new he({next:D,prev:E,setter:F=>{f(M,F,{shouldDirty:!0,shouldTouch:!0})}});m(z),Y(g,C)},[m,c,Y,s,f]),Z=u.useCallback(g=>{if(!t)return;switch(g.preventDefault(),s.getCellType(t)){case"togglable-number":case"text":case"number":te(g,t);break;case"boolean":{se(g,t);break}}},[t,s,te,se]),L=u.useCallback((g,C)=>{const M=s.getFieldsInSelection(g,C),E=x(M),D=E.map(F=>({...F,quantity:"",checked:F.disableToggle?F.checked:!1})),z=new le({fields:M,next:D,prev:E,setter:y});m(z)},[s,x,y,m]),B=u.useCallback((g,C)=>{const M=s.getFieldsInSelection(g,C),E=x(M),D=Array.from({length:E.length},()=>""),z=new le({fields:M,next:D,prev:E,setter:y});m(z)},[s,x,y,m]),ne=u.useCallback((g,C)=>{const M=s.getFieldsInSelection(g,C),E=x(M),D=Array.from({length:E.length},()=>!1),z=new le({fields:M,next:D,prev:E,setter:y});m(z)},[m,x,s,y]),S=u.useCallback(g=>{if(!t||!n||r)return;g.preventDefault();const C=s.getCellType(t);if(C)switch(C){case"text":case"number":B(t,n);break;case"boolean":ne(t,n);break;case"togglable-number":L(t,n);break}},[t,n,r,s,B,ne,L]),P=u.useCallback(g=>{if(!t||!r)return;g.preventDefault(),g.stopPropagation(),k();const C=p==null?void 0:p.getContainer(t);C==null||C.focus()},[p,r,t,k]),Q=u.useCallback(g=>{if(!e||r)return;const C=nn(e),M=E=>{E&&(l(!1),E.focus())};switch(g.key){case".":M(C.cancel);break;case",":M(C.shortcuts);break}},[r,l,e]);return{handleKeyDownEvent:u.useCallback(g=>{if(en.includes(g.key)){I(g);return}if(g.key==="z"&&(g.metaKey||g.ctrlKey)){O(g);return}if(g.key===" "){U(g);return}if(g.key==="Delete"||g.key==="Backspace"){S(g);return}if(g.key==="Enter"){Z(g);return}if(g.key==="Escape"){P(g);return}if(g.key==="Tab"){j(g);return}},[P,I,O,U,Z,S,j]),handleSpecialFocusKeys:Q}};function nn(e){const s=Array.from(document.querySelectorAll("[tabindex], a, button, input, select, textarea")),t=s.indexOf(e.current),n=t>0?s[t-1]:null;let r=null;for(let l=t+1;l<s.length;l++)if(!e.current.contains(s[l])){r=s[l];break}return{shortcuts:n,cancel:r}}var rn=({matrix:e,anchor:s,dragEnd:t,setDragEnd:n,isDragging:r,setIsDragging:l,setRangeEnd:i,setIsSelecting:o,getSelectionValues:a,setSelectionValues:h,execute:c})=>{const f=u.useCallback(()=>{if(!r||!s||!t)return;const v=e.getFieldsInSelection(s,t),b=e.getCellField(s);if(!b||!v.length)return;const p=a([b]),x=v.filter(I=>I!==b),y=a(x),k=Array.from({length:y.length},()=>p[0]),w=new le({fields:x,prev:y,next:k,setter:h});c(w),l(!1),n(null),i(t)},[r,s,t,e,a,h,c,l,n,i]);return{handleMouseUpEvent:u.useCallback(()=>{f(),o(!1)},[f,o])}},ln=({matrix:e,anchor:s,visibleColumns:t,visibleRows:n,columnVirtualizer:r,rowVirtualizer:l,setColumnVisibility:i,flatColumns:o,queryTool:a,setSingleRange:h})=>{const c=u.useCallback((m,v)=>{if(!s)return;const{row:b,col:p}=m,{row:x,col:y}=s,k=b>=x?"down":"up",w=p>=y?"right":"left";let I=k==="down"?b+1:b-1;n[I]===void 0&&(I=b);let j=w==="right"?p+1:p-1;t[j]===void 0&&(j=p);const O={align:"auto",behavior:"auto"};(v==="horizontal"||v==="both")&&r.scrollToIndex(j,O),(v==="vertical"||v==="both")&&l.scrollToIndex(I,O)},[s,r,n,l,t]),f=u.useCallback(m=>{const v=e.getCoordinatesByField(m);if(!v)return;const b=o[v.col];i(p=>({...p,[b.id]:!0})),requestAnimationFrame(()=>{c(v,"both"),h(v)}),requestAnimationFrame(()=>{const p=a==null?void 0:a.getInput(v);p&&p.focus()})},[e,o,i,c,h,a]);return{scrollToCoordinates:c,navigateToField:f}},on=e=>{const s=u.useRef(null);return u.useEffect(()=>{e.current&&(s.current=new Ts(e.current))},[e]),s.current},jt=({rowErrors:e})=>{const s=e?e.length:0;return!e||s<=0?null:d.jsx(ze,{content:d.jsx("ul",{className:"flex flex-col gap-y-3",children:e.map((t,n)=>d.jsx(an,{error:t},n))}),delayDuration:0,children:d.jsx(Wt,{color:"red",size:"2xsmall",className:"cursor-default",children:s})})},an=({error:e})=>{const{t:s}=oe();return d.jsxs("li",{className:"txt-compact-small flex flex-col items-start",children:[e.message,d.jsx("button",{type:"button",onClick:e.to,className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg",children:s("dataGrid.errors.fixError")})]})},xe=({isAnchor:e,isSelected:s,isDragSelected:t,field:n,showOverlay:r,placeholder:l,innerProps:i,overlayProps:o,children:a,errors:h,rowErrors:c,outerComponent:f})=>{const v=!!fe(h,n);return d.jsxs("div",{className:"group/container relative size-full",children:[d.jsxs("div",{className:q("bg-ui-bg-base group/cell relative flex size-full items-center gap-x-2 px-4 py-2.5 outline-none",{"bg-ui-tag-red-bg text-ui-tag-red-text":v&&!e&&!s&&!t,"ring-ui-bg-interactive ring-2 ring-inset":e,"bg-ui-bg-highlight [&:has([data-field]:focus)]:bg-ui-bg-base":s||e,"bg-ui-bg-subtle":t&&!e}),tabIndex:-1,...i,children:[d.jsx(ws,{name:n,errors:h,render:({message:b})=>d.jsx("div",{className:"flex items-center justify-center",children:d.jsx(ze,{content:b,delayDuration:0,children:d.jsx(it,{className:"text-ui-tag-red-icon z-[3]"})})})}),d.jsx("div",{className:"relative z-[1] flex size-full items-center justify-center",children:d.jsx(cn,{isAnchor:e,placeholder:l,children:a})}),d.jsx(jt,{rowErrors:c}),r&&d.jsx("div",{...o,"data-cell-overlay":"true",className:"absolute inset-0 z-[2]"})]}),f]})},cn=({isAnchor:e,placeholder:s,children:t})=>!e&&s?s:t,un=({context:e,disabled:s})=>{const{field:t,control:n,renderProps:r}=we({context:e}),l=ie({context:e}),{container:i,input:o}=r;return d.jsx(be,{control:n,name:t,render:({field:a})=>d.jsx(xe,{...i,...l,children:d.jsx(dn,{field:a,inputProps:o,disabled:s})})})},dn=({field:e,inputProps:s,disabled:t})=>{const{ref:n,value:r,onBlur:l,name:i,disabled:o}=e,{ref:a,onBlur:h,onChange:c,onFocus:f,...m}=s,v=ve(n,a);return d.jsx(Ut,{disabled:t||o,name:i,checked:r,onCheckedChange:b=>c(b===!0,r),onFocus:f,onBlur:()=>{l(),h()},ref:v,tabIndex:-1,...m})},Ie=({context:e,code:s})=>{const{field:t,control:n,renderProps:r}=we({context:e}),l=ie({context:e}),{container:i,input:o}=r,a=Pt[s.toUpperCase()];return d.jsx(be,{control:n,name:t,render:({field:h})=>d.jsx(xe,{...i,...l,children:d.jsx(hn,{field:h,inputProps:o,currencyInfo:a})})})},hn=({field:e,inputProps:s,currencyInfo:t})=>{const{value:n,onChange:r,onBlur:l,ref:i,...o}=e,{ref:a,onBlur:h,onFocus:c,onChange:f,...m}=s,v=u.useCallback(k=>{const w=typeof k=="number"?k.toString():k||"";return Lt({value:w,decimalScale:t.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[t]),[b,p]=u.useState(n||""),x=(k,w,I)=>{if(!k){p("");return}p(k)};u.useEffect(()=>{let k=n;isNaN(Number(n))||(k=v(k)),p(k)},[n,v]);const y=ve(a,i);return d.jsxs("div",{className:"relative flex size-full items-center",children:[d.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,children:t.symbol_native}),d.jsx(Ht,{...o,...m,ref:y,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:b||void 0,onValueChange:x,formatValueOnBlur:!0,onBlur:()=>{l(),h(),f(b,n)},onFocus:c,decimalScale:t.decimal_digits,decimalsLimit:t.decimal_digits,autoComplete:"off",tabIndex:-1})]})},fn=({context:e,...s})=>{const{field:t,control:n,renderProps:r}=we({context:e}),l=ie({context:e}),{container:i,input:o}=r;return d.jsx(be,{control:n,name:t,render:({field:a})=>d.jsx(xe,{...i,...l,children:d.jsx(mn,{field:a,inputProps:o,...s})})})},mn=({field:e,inputProps:s,...t})=>{const{ref:n,value:r,onChange:l,onBlur:i,...o}=e,{ref:a,onChange:h,onBlur:c,onFocus:f,...m}=s,[v,b]=u.useState(r);u.useEffect(()=>{b(r)},[r]);const p=ve(a,n);return d.jsx("div",{className:"size-full",children:d.jsx("input",{ref:p,value:v,onChange:x=>b(x.target.value),onBlur:()=>{i(),c(),h(v,r)},onFocus:f,type:"number",inputMode:"decimal",className:q("txt-compact-small size-full bg-transparent outline-none","placeholder:text-ui-fg-muted"),tabIndex:-1,...t,...o,...m})})},Oe=({context:e,color:s="muted",children:t})=>{const{rowErrors:n}=ie({context:e});return d.jsxs("div",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-not-allowed items-center justify-between overflow-hidden px-4 py-2.5 outline-none",s==="muted"&&"bg-ui-bg-subtle",s==="normal"&&"bg-ui-bg-base"),children:[d.jsx("div",{className:"flex-1 truncate",children:t}),d.jsx(jt,{rowErrors:n})]})},pn=(e=20)=>{const[s,t]=u.useState([]),[n,r]=u.useState([]),l=s.length>0,i=n.length>0,o=u.useCallback(()=>{if(!l)return;const c=s[s.length-1],f=s.slice(0,s.length-1);c.undo(),t(f),r([c,...n.slice(0,e-1)])},[l,n,s,e]),a=u.useCallback(()=>{if(!i)return;const c=n[0],f=n.slice(1);c.redo(),t([...s,c].slice(0,e-1)),r(f)},[i,n,s,e]),h=u.useCallback(c=>{c.execute(),t(f=>[...f,c].slice(0,e-1)),r([])},[e]);return{undo:o,redo:a,execute:h,canUndo:l,canRedo:i}},gn=()=>{const{t:e}=oe();return u.useMemo(()=>[{label:e("dataGrid.shortcuts.commands.undo"),keys:{Mac:["⌘","Z"],Windows:["Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.redo"),keys:{Mac:["⇧","⌘","Z"],Windows:["Shift","Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.copy"),keys:{Mac:["⌘","C"],Windows:["Ctrl","C"]}},{label:e("dataGrid.shortcuts.commands.paste"),keys:{Mac:["⌘","V"],Windows:["Ctrl","V"]}},{label:e("dataGrid.shortcuts.commands.edit"),keys:{Mac:["↵"],Windows:["Enter"]}},{label:e("dataGrid.shortcuts.commands.delete"),keys:{Mac:["⌫"],Windows:["Backspace"]}},{label:e("dataGrid.shortcuts.commands.clear"),keys:{Mac:["Space"],Windows:["Space"]}},{label:e("dataGrid.shortcuts.commands.moveUp"),keys:{Mac:["↑"],Windows:["↑"]}},{label:e("dataGrid.shortcuts.commands.moveDown"),keys:{Mac:["↓"],Windows:["↓"]}},{label:e("dataGrid.shortcuts.commands.moveLeft"),keys:{Mac:["←"],Windows:["←"]}},{label:e("dataGrid.shortcuts.commands.moveRight"),keys:{Mac:["→"],Windows:["→"]}},{label:e("dataGrid.shortcuts.commands.moveTop"),keys:{Mac:["⌘","↑"],Windows:["Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.moveBottom"),keys:{Mac:["⌘","↓"],Windows:["Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectDown"),keys:{Mac:["⇧","↓"],Windows:["Shift","↓"]}},{label:e("dataGrid.shortcuts.commands.selectUp"),keys:{Mac:["⇧","↑"],Windows:["Shift","↑"]}},{label:e("dataGrid.shortcuts.commands.selectColumnDown"),keys:{Mac:["⇧","⌘","↓"],Windows:["Shift","Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectColumnUp"),keys:{Mac:["⇧","⌘","↑"],Windows:["Shift","Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.focusToolbar"),keys:{Mac:["⌃","⌥",","],Windows:["Ctrl","Alt",","]}},{label:e("dataGrid.shortcuts.commands.focusCancel"),keys:{Mac:["⌃","⌥","."],Windows:["Ctrl","Alt","."]}}],[e])},bn=({open:e,onOpenChange:s})=>{const{t}=oe(),[n,r]=u.useState(""),l=gn(),i=u.useMemo(()=>l.filter(o=>o.label.toLowerCase().includes(n.toLowerCase())),[n,l]);return d.jsxs(Jt,{open:e,onOpenChange:s,children:[d.jsx(Xt,{asChild:!0,children:d.jsx(de,{size:"small",variant:"secondary",children:t("dataGrid.shortcuts.label")})}),d.jsxs(qt,{children:[d.jsx(es,{className:q("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),d.jsxs(ts,{className:"bg-ui-bg-subtle shadow-elevation-modal fixed left-[50%] top-[50%] flex h-full max-h-[612px] w-full max-w-[560px] translate-x-[-50%] translate-y-[-50%] flex-col divide-y overflow-hidden rounded-lg outline-none",children:[d.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx(ss,{asChild:!0,children:d.jsx(ns,{children:t("app.menus.user.shortcuts")})}),d.jsx(rs,{className:"sr-only"})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsx(Qe,{children:"esc"}),d.jsx(ls,{asChild:!0,children:d.jsx(os,{variant:"transparent",size:"small",children:d.jsx(is,{})})})]})]}),d.jsx("div",{children:d.jsx(as,{type:"search",value:n,autoFocus:!0,onChange:o=>r(o.target.value)})})]}),d.jsx("div",{className:"flex flex-col divide-y overflow-y-auto",children:i.map((o,a)=>{var h;return d.jsxs("div",{className:"text-ui-fg-subtle flex items-center justify-between px-6 py-3",children:[d.jsx(cs,{size:"small",children:o.label}),d.jsx("div",{className:"flex items-center gap-x-1",children:(h=o.keys.Mac)==null?void 0:h.map((c,f)=>d.jsx("div",{className:"flex items-center gap-x-1",children:d.jsx(Qe,{children:c})},f))})]},a)})})]})]})]})},vn=40,St=e=>{const s=e.getIsPinned(),n=document.documentElement.classList.contains("dark")?"rgb(50,50,53)":"rgb(228,228,231)";return{position:s?"sticky":"relative",width:e.getSize(),zIndex:s?1:0,borderBottom:s?`1px solid ${n}`:void 0,borderRight:s?`1px solid ${n}`:void 0,left:s==="left"?`${e.getStart("left")}px`:void 0,right:s==="right"?`${e.getAfter("right")}px`:void 0}},wn=({data:e=[],columns:s,state:t,getSubRows:n,onEditingChange:r,disableInteractions:l,multiColumnSelection:i=!1})=>{var Ue,Ye;const o=u.useRef(null),{redo:a,undo:h,execute:c}=pn(),{register:f,control:m,getValues:v,setValue:b,formState:{errors:p}}=t,[x,y]=u.useState(!0),k=!l&&x,[w,I]=u.useState(null),[j,O]=u.useState(null),[G,T]=u.useState(null),[R,U]=u.useState(!1),[Y,ee]=u.useState(!1),[te,se]=u.useState(!1),[Z,L]=u.useState({}),[B,ne]=u.useState({}),S=Kt({data:e,columns:s,initialState:{columnPinning:{left:[s[0].id]}},state:{columnVisibility:Z},onColumnVisibilityChange:L,getSubRows:n,getCoreRowModel:Bt(),defaultColumn:{size:200,maxSize:400}}),{flatRows:P}=S.getRowModel(),Q=S.getAllFlatColumns(),J=u.useMemo(()=>P.filter((_,A)=>(B==null?void 0:B[A])!==!1),[P,B]),g=S.getVisibleLeafColumns(),C=lt({count:J.length,estimateSize:()=>vn,getScrollElement:()=>o.current,overscan:5,rangeExtractor:_=>{const A=new Set(Array.from({length:_.endIndex-_.startIndex+1},(W,$)=>_.startIndex+$));return w&&J[w.row]&&A.add(w.row),j&&J[j.row]&&A.add(j.row),Array.from(A).sort((W,$)=>W-$)}}),M=C.getVirtualItems(),E=lt({count:g.length,estimateSize:_=>g[_].getSize(),getScrollElement:()=>o.current,horizontal:!0,overscan:3,rangeExtractor:_=>{const A=_.startIndex,W=_.endIndex,$=new Set(Array.from({length:W-A+1},(ae,H)=>A+H));return w&&g[w.col]&&$.add(w.col),j&&g[j.col]&&$.add(j.col),$.add(0),Array.from($).sort((ae,H)=>ae-H)}}),D=E.getVirtualItems();let z,F;E&&(D!=null&&D.length)&&(z=((Ue=D[0])==null?void 0:Ue.start)??0,F=E.getTotalSize()-(((Ye=D[D.length-1])==null?void 0:Ye.end)??0));const N=u.useMemo(()=>new Ps(P,s,i),[P,s,i]),X=on(o),V=u.useCallback(_=>{I(_),O(_)},[]),{errorCount:Et,isHighlighted:_t,toggleErrorHighlighting:Ae}=Ls(N,S,p),Mt=u.useCallback(()=>{Ae(B,Z,ne,L)},[Ae,B,Z]),{columnOptions:Dt,handleToggleColumn:Fe,handleResetColumns:It,isDisabled:Ot}=Ks(S,N),zt=u.useCallback(_=>Fe(_),[Fe]),{navigateToField:Re,scrollToCoordinates:Ce}=ln({matrix:N,queryTool:X,anchor:w,columnVirtualizer:E,rowVirtualizer:C,flatColumns:Q,setColumnVisibility:L,setSingleRange:V,visibleColumns:g,visibleRows:J}),{createSnapshot:ye,restoreSnapshot:Nt}=Ws({matrix:N,form:t}),ke=u.useCallback(_=>{r&&r(_),_&&ye(w),se(_)},[w,ye,r]),{getSelectionValues:je,setSelectionValues:Se}=Hs({matrix:N,form:t,anchor:w}),{handleKeyDownEvent:Ee,handleSpecialFocusKeys:Pe}=sn({containerRef:o,matrix:N,queryTool:X,anchor:w,rangeEnd:j,isEditing:te,setTrapActive:y,setRangeEnd:O,getSelectionValues:je,getValues:v,setSelectionValues:Se,onEditingChangeHandler:ke,restoreSnapshot:Nt,createSnapshot:ye,setSingleRange:V,scrollToCoordinates:Ce,execute:c,undo:h,redo:a,setValue:b}),{handleMouseUpEvent:_e}=rn({matrix:N,anchor:w,dragEnd:G,setDragEnd:T,isDragging:Y,setIsDragging:ee,setRangeEnd:O,setIsSelecting:U,getSelectionValues:je,setSelectionValues:Se,execute:c}),{handleCopyEvent:Me,handlePasteEvent:De}=$s({matrix:N,isEditing:te,anchor:w,rangeEnd:j,getSelectionValues:je,setSelectionValues:Se,execute:c}),{getWrapperFocusHandler:Te,getInputChangeHandler:Ge,getOverlayMouseDownHandler:Ve,getWrapperMouseOverHandler:We,getIsCellDragSelected:$e,getIsCellSelected:Ke,onDragToFillStart:At}=Gs({matrix:N,anchor:w,rangeEnd:j,setRangeEnd:O,isDragging:Y,setIsDragging:ee,isSelecting:R,setIsSelecting:U,setSingleRange:V,dragEnd:G,setDragEnd:T,setValue:b,execute:c,multiColumnSelection:i}),{getCellErrorMetadata:Be,getCellMetadata:Le}=Vs({matrix:N});u.useEffect(()=>{if(k)return window.addEventListener("keydown",Ee),window.addEventListener("mouseup",_e),window.addEventListener("copy",Me),window.addEventListener("paste",De),()=>{window.removeEventListener("keydown",Ee),window.removeEventListener("mouseup",_e),window.removeEventListener("copy",Me),window.removeEventListener("paste",De)}},[k,Ee,_e,Me,De]),u.useEffect(()=>{const _=A=>{if(yt(A)){Pe(A);return}};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[Pe]);const Ft=u.useCallback(_=>{_&&y(!1)},[]);u.useEffect(()=>{w&&(j||O(w))},[w,j]),u.useEffect(()=>{if(!w&&N){const _=N.getFirstNavigableCell();_&&V(_)}},[w,N,V]);const Rt=u.useMemo(()=>({anchor:w,control:m,trapActive:k,errors:p,setTrapActive:y,setIsSelecting:U,setIsEditing:ke,setSingleRange:V,setRangeEnd:O,getWrapperFocusHandler:Te,getInputChangeHandler:Ge,getOverlayMouseDownHandler:Ve,getWrapperMouseOverHandler:We,register:f,getIsCellSelected:Ke,getIsCellDragSelected:$e,getCellMetadata:Le,getCellErrorMetadata:Be,navigateToField:Re}),[w,m,k,p,y,U,ke,V,O,Te,Ge,Ve,We,f,Ke,$e,Le,Be,Re]),He=u.useCallback(()=>{w&&!k&&(y(!0),V(w),Ce(w,"both"),requestAnimationFrame(()=>{var _;(_=X==null?void 0:X.getContainer(w))==null||_.focus()}))},[w,k,V,Ce,X]);return d.jsx(wt.Provider,{value:Rt,children:d.jsxs("div",{className:"bg-ui-bg-subtle flex size-full flex-col",children:[d.jsx(xn,{columnOptions:Dt,isDisabled:Ot,onToggleColumn:zt,errorCount:Et,onToggleErrorHighlighting:Mt,onResetColumns:It,isHighlighted:_t,onHeaderInteractionChange:Ft}),d.jsx("div",{className:"size-full overflow-hidden",children:d.jsx("div",{ref:o,autoFocus:!0,tabIndex:0,className:"relative h-full select-none overflow-auto outline-none",onFocus:He,onClick:He,"data-container":!0,role:"application",children:d.jsxs("div",{role:"grid",className:"text-ui-fg-subtle grid",children:[d.jsx("div",{role:"rowgroup",className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:S.getHeaderGroups().map(_=>d.jsxs("div",{role:"row",className:"flex h-10 w-full",children:[z?d.jsx("div",{role:"presentation",style:{display:"flex",width:z}}):null,D.reduce((A,W,$,ae)=>{const H=_.headers[W.index],ce=ae[$-1];return ce&&W.index!==ce.index+1&&A.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${W.start-ce.end}px`}},`padding-${ce.index}-${W.index}`)),A.push(d.jsx("div",{role:"columnheader","data-column-index":W.index,style:{width:H.getSize(),...St(H.column)},className:"bg-ui-bg-base txt-compact-small-plus flex items-center border-b border-r px-4 py-2.5",children:H.isPlaceholder?null:at(H.column.columnDef.header,H.getContext())},H.id)),A},[]),F?d.jsx("div",{role:"presentation",style:{display:"flex",width:F}}):null]},_.id))}),d.jsx("div",{role:"rowgroup",className:"relative grid",style:{height:`${C.getTotalSize()}px`},children:M.map(_=>{const A=J[_.index],W=P.findIndex($=>$.id===A.id);return d.jsx(yn,{row:A,rowIndex:W,virtualRow:_,flatColumns:Q,virtualColumns:D,anchor:w,virtualPaddingLeft:z,virtualPaddingRight:F,onDragToFillStart:At,multiColumnSelection:i},A.id)})})]})})})]})})},xn=({columnOptions:e,isDisabled:s,onToggleColumn:t,onResetColumns:n,isHighlighted:r,errorCount:l,onToggleErrorHighlighting:i,onHeaderInteractionChange:o})=>{const[a,h]=u.useState(!1),[c,f]=u.useState(!1),{t:m}=oe(),v=Yt(),b=e.some(y=>!y.checked),p=y=>{o(y),h(y)},x=y=>{o(y),f(y)};return d.jsxs("div",{className:"bg-ui-bg-base flex items-center justify-between border-b p-4",children:[d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsxs(ue,{dir:v,open:c,onOpenChange:x,children:[d.jsx(Zt,{showTooltip:s,content:m("dataGrid.columns.disabled"),children:d.jsx(ue.Trigger,{asChild:!0,disabled:s,children:d.jsxs(de,{size:"small",variant:"secondary",children:[b?d.jsx(dt,{}):d.jsx(Qt,{}),m("dataGrid.columns.view")]})})}),d.jsx(ue.Content,{children:e.map((y,k)=>{const{checked:w,disabled:I,id:j,name:O}=y;return I?null:d.jsx(ue.CheckboxItem,{checked:w,onCheckedChange:t(k),onSelect:G=>G.preventDefault(),children:O},j)})})]}),b&&d.jsx(de,{size:"small",variant:"transparent",type:"button",onClick:n,className:"text-ui-fg-muted hover:text-ui-fg-subtle","data-id":"reset-columns",children:m("dataGrid.columns.resetToDefault")})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[l>0&&d.jsxs(de,{size:"small",variant:"secondary",type:"button",onClick:i,className:q({"bg-ui-button-neutral-pressed":r}),children:[d.jsx(it,{className:"text-ui-fg-subtle"}),d.jsx("span",{children:m("dataGrid.errors.count",{count:l})})]}),d.jsx(bn,{open:a,onOpenChange:p})]})]})},Cn=({cell:e,columnIndex:s,rowIndex:t,anchor:n,onDragToFillStart:r,multiColumnSelection:l})=>{const o=Ct({row:t,col:s},n);return d.jsx("div",{role:"gridcell","aria-rowindex":t,"aria-colindex":s,style:{width:e.column.getSize(),...St(e.column)},"data-row-index":t,"data-column-index":s,className:q("relative flex items-center border-b border-r p-0 outline-none"),tabIndex:-1,children:d.jsxs("div",{className:"relative h-full w-full",children:[at(e.column.columnDef.cell,{...e.getContext(),columnIndex:s,rowIndex:t}),o&&d.jsx("div",{onMouseDown:r,className:q("bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize",{"cursor-nwse-resize":l})})]})})},yn=({row:e,rowIndex:s,virtualRow:t,virtualPaddingLeft:n,virtualPaddingRight:r,virtualColumns:l,flatColumns:i,anchor:o,onDragToFillStart:a,multiColumnSelection:h})=>{const c=e.getVisibleCells();return d.jsxs("div",{role:"row","aria-rowindex":t.index,style:{transform:`translateY(${t.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:[n?d.jsx("div",{role:"presentation",style:{display:"flex",width:n}}):null,l.reduce((f,m,v,b)=>{const p=c[m.index],x=p.column,y=i.findIndex(w=>w.id===x.id),k=b[v-1];return k&&m.index!==k.index+1&&f.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${m.start-k.end}px`}},`padding-${k.index}-${m.index}`)),f.push(d.jsx(Cn,{cell:p,columnIndex:y,rowIndex:s,anchor:o,onDragToFillStart:a,multiColumnSelection:h},p.id)),f},[]),r?d.jsx("div",{role:"presentation",style:{display:"flex",width:r}}):null]})},kn=({context:e})=>{const{field:s,control:t,renderProps:n}=we({context:e}),r=ie({context:e}),{container:l,input:i}=n;return d.jsx(be,{control:t,name:s,render:({field:o})=>d.jsx(xe,{...l,...r,children:d.jsx(jn,{field:o,inputProps:i})})})},jn=({field:e,inputProps:s})=>{const{onChange:t,onBlur:n,ref:r,value:l,...i}=e,{ref:o,onBlur:a,onChange:h,...c}=s,[f,m]=u.useState(l);u.useEffect(()=>{m(l)},[l]);const v=ve(o,r);return d.jsx("input",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-pointer items-center justify-center bg-transparent outline-none","focus:cursor-text"),autoComplete:"off",tabIndex:-1,value:f,onChange:b=>m(b.target.value),ref:v,onBlur:()=>{n(),a(),h(f,l)},...c,...i})},Sn=({isLoading:e,...s})=>{var t;return e?d.jsx(Os,{columns:s.columns,rows:(t=s.data)!=null&&t.length&&s.data.length>0?s.data.length:10}):d.jsx(wn,{...s})},In=Object.assign(Sn,{BooleanCell:un,TextCell:kn,NumberCell:fn,CurrencyCell:Ie,ReadonlyCell:Oe});function En(){const e=Vt();return{column:({id:s,name:t,header:n,cell:r,disableHiding:l=!1,field:i,type:o})=>e.display({id:s,header:n,cell:r,enableHiding:!l,meta:{name:t,field:i,type:o}})}}var ot=({includesTax:e})=>{const{t:s}=oe();return d.jsx(ze,{maxWidth:999,content:s(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:e?d.jsx(bt,{className:"text-ui-fg-muted shrink-0"}):d.jsx(mt,{className:"text-ui-fg-muted shrink-0"})})},On=({currencies:e,regions:s,pricePreferences:t,isReadyOnly:n,getFieldName:r,t:l})=>{const i=En();return[...(e==null?void 0:e.map(o=>{const a=t==null?void 0:t.find(c=>c.attribute==="currency_code"&&c.value===o),h=l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()});return i.column({id:`currency_prices.${o}`,name:l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()}),field:c=>(n==null?void 0:n(c))?null:r(c,o),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:h,children:h}),d.jsx(ot,{includesTax:a==null?void 0:a.is_tax_inclusive})]}),cell:c=>n!=null&&n(c)?d.jsx(Oe,{context:c}):d.jsx(Ie,{code:o,context:c})})}))??[],...(s==null?void 0:s.map(o=>{const a=t==null?void 0:t.find(c=>c.attribute==="region_id"&&c.value===o.id),h=l("fields.priceTemplate",{regionOrCurrency:o.name});return i.column({id:`region_prices.${o.id}`,name:l("fields.priceTemplate",{regionOrCurrency:o.name}),field:c=>(n==null?void 0:n(c))?null:r(c,o.id),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:h,children:h}),d.jsx(ot,{includesTax:a==null?void 0:a.is_tax_inclusive})]}),cell:c=>n!=null&&n(c)?d.jsx(Oe,{context:c}):(e==null?void 0:e.find(m=>m===o.currency_code))?d.jsx(Ie,{code:o.currency_code,context:c}):null})}))??[]]};export{In as D,ot as I,On as a,Os as b,En as c,Oe as d,we as e,ie as f,xe as g,ve as h,Dn as u};
