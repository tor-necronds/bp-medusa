import{g as v}from"./chunk-DK4WIVY6-CYCbBMOO.js";import{K as E}from"./chunk-6HTZNHPT-DGQV_Lcz.js";import{b as r,u as F}from"./chunk-AERWK3TJ-DmmmqBU-.js";import{b as f,ah as S,e3 as B,j as e,H as I,aD as T,aE as K,ax as N,eg as w,t as p,J as o,dO as H,K as L,B as y,aK as R}from"./index-DsV72Lgh.js";var _=N({limit:R().min(0).optional().nullable()}),z=({campaign:s})=>{var m;const{t:a}=f(),{handleSuccess:d}=F(),n=T({defaultValues:{limit:((m=s==null?void 0:s.budget)==null?void 0:m.limit)||void 0},resolver:K(_)}),{mutateAsync:c,isPending:u}=w(s.id),C=n.handleSubmit(async i=>{await c({budget:{limit:i.limit?i.limit:null}},{onSuccess:({campaign:t})=>{p.success(a("campaigns.edit.successToast",{name:t.name})),d()},onError:t=>{p.error(t.message)}})});return e.jsx(r.Form,{form:n,children:e.jsxs(E,{onSubmit:C,className:"flex flex-1 flex-col",children:[e.jsx(r.Body,{children:e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsx(o.Field,{control:n.control,name:"limit",render:({field:{onChange:i,value:t,...x}})=>{var g,h,j,b;return e.jsxs(o.Item,{className:"basis-1/2",children:[e.jsx(o.Label,{children:a("campaigns.budget.fields.limit")}),e.jsx(o.Control,{children:((g=s.budget)==null?void 0:g.type)==="spend"?e.jsx(H,{min:0,onValueChange:l=>i(l?parseInt(l):null),code:(h=s.budget)==null?void 0:h.currency_code,symbol:(j=s.budget)!=null&&j.currency_code?v((b=s.budget)==null?void 0:b.currency_code):"",...x,value:t||void 0}):e.jsx(L,{min:0,...x,value:t,onChange:l=>{i(l.target.value===""?null:parseInt(l.target.value))}},"usage")}),e.jsx(o.ErrorMessage,{})]})}})})}),e.jsx(r.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(r.Close,{asChild:!0,children:e.jsx(y,{variant:"secondary",size:"small",children:a("actions.cancel")})}),e.jsx(y,{isLoading:u,type:"submit",variant:"primary",size:"small",children:a("actions.save")})]})})]})})},A=()=>{const{t:s}=f(),{id:a}=S(),{campaign:d,isLoading:n,isError:c,error:u}=B(a);if(c)throw u;return e.jsxs(r,{children:[e.jsx(r.Header,{children:e.jsx(r.Title,{asChild:!0,children:e.jsx(I,{children:s("campaigns.budget.edit.header")})})}),!n&&d&&e.jsx(z,{campaign:d})]})};export{A as Component};
